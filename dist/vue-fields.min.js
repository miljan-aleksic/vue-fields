/*!
 * vue-fields v1.1.2
 * https://github.com/pagekit/vue-fields
 * Released under the MIT License.
 */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).VueFields=n()}(this,function(){"use strict";var o,i={},r=Object.assign||function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(n){Object.keys(n||{}).forEach(function(e){return t[e]=n[e]})}),t},u=Array.isArray;function t(e,n){void 0===n&&(n="#41B883"),"undefined"!=typeof console&&i.devtools&&console.log("%c vue-fields %c "+e+" ","color: #fff; background: #35495E; padding: 1px; border-radius: 3px 0 0 3px;","color: #fff; background: "+n+"; padding: 1px; border-radius: 0 3px 3px 0;")}function f(e,n){void 0===n&&(n="#DB6B00"),t(e,n)}function s(e){return null!==e&&"object"==typeof e}function a(e){return void 0===e}function c(e,n,t){for(var i=u(n)?n:n.split("."),r=0;r<i.length;r++){if(!s(e)||a(e[i[r]]))return t;e=e[i[r]]}return e}var l={},d=/((?:\d|true|false|null|undefined|(?:this\.|\$)[\w.$]+|\W)*)([\w][\w.]*)?/g,p=/([^"']+)((.)(?:[^\3\\]|\\.)*?\3|.)?/g;function n(e,n){var t,i;if("number"==typeof e.length)for(t=0;t<e.length;t++)n.call(e[t],e[t],t);else if(s(e))for(i in e)e.hasOwnProperty(i)&&n.call(e[i],e[i],i);return e}var v={provide:function(){return{Fields:this}},props:{config:{type:[Object,Array],default:function(){return{}}},values:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"}},methods:{prepare:function(e){var t=[],i=u(e);return n(e,function(e,n){(e=r({},e)).name||i||(e.name=n),e.name?t.push(e):f("Field name missing "+JSON.stringify(e))}),t},evaluate:function(e,n){void 0===n&&(n=this.values);try{return!!a(e)||(function(e){return"string"==typeof e}(e)&&(e=function(e){return l[e]=l[e]||Function("$values","$context","with($context){return "+e.replace(p,function(e,n,t){return void 0===t&&(t=""),n.replace(d,function(e,n,t){return void 0===n&&(n=""),e?n+(t?"$get('"+t+"')":""):""})+t})+"}")}(e)),function(e){return"function"==typeof e}(e)?e.call(this,n,{$match:h,$get:function(e){return c(n,e)}}):e)}catch(e){f(e)}return!0},filterOptions:function(e){var t=this,i=[];return u(e)?e:(n(e,function(e,n){s(e)?i.push({label:n,options:t.filterOptions(e)}):i.push({text:n,value:e})}),i)}},render:function(e){var t=this,n=this.prepare(this.config,this.prefix);if(this.$scopedSlots.default)return e(this.tag,n.map(function(n){var e={field:n,evaluate:t.evaluate,filterOptions:t.filterOptions};return Object.defineProperty(n,"value",{get:function(){return c(t.values,n.name)},set:function(e){!function(e,n,t){for(var i=u(n)?n:n.split(".");1<i.length;){var r=i.shift();s(e[r])||o(e,r,{}),e=e[r]}o(e,i.shift(),t)}(t.values,n.name,e),t.$emit("change",e,n)}}),t.$scopedSlots.default(e)}));f("Default Fields slot is missing")}};function h(e,n,t){return e&&new RegExp(n,t).test(e)}var e={Fields:v,install:function(e){this.installed||(function(e){var n=e.set,t=e.config;o=n,i=t}(e),t(this.version),e.component("fields",v))},version:"1.1.2"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});
