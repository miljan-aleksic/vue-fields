/*!
 * vue-fields v1.1.2
 * https://github.com/pagekit/vue-fields
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueFields=t()}(this,function(){"use strict";var r,i={},f=Object.assign||function(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return t.forEach(function(t){Object.keys(t||{}).forEach(function(e){return n[e]=t[e]})}),n},u=Array.isArray;function n(e,t){void 0===t&&(t="#41B883"),"undefined"!=typeof console&&i.devtools&&console.log("%c vue-fields %c "+e+" ","color: #fff; background: #35495E; padding: 1px; border-radius: 3px 0 0 3px;","color: #fff; background: "+t+"; padding: 1px; border-radius: 0 3px 3px 0;")}function s(e,t){void 0===t&&(t="#DB6B00"),n(e,t)}function l(e){return null!==e&&"object"==typeof e}function t(e,t){var n,i;if("number"==typeof e.length)for(n=0;n<e.length;n++)t.call(e[n],e[n],n);else if(l(e))for(i in e)e.hasOwnProperty(i)&&t.call(e[i],e[i],i);return e}var o={inject:["values"],props:{field:{type:Object,required:!0}},computed:{$value:{get:function(){return this.getValue(this.values,this.field.name)},set:function(e){this.setValue(e)}}},methods:{getValue:function(){return function(e,t,n){for(var i=u(t)?t:t.split("."),o=0;o<i.length;o++){if(!l(e)||void 0===e[i[o]])return n;e=e[i[o]]}return e}(this.values,this.field.name)},setValue:function(e){!function(e,t,n){for(var i=u(t)?t:t.split(".");1<i.length;){var o=i.shift();l(e[o])||r(e,o,{}),e=e[o]}r(e,i.shift(),n)}(this.values,this.field.name,e),this.$emit("change",e)},filterOptions:function(e){var n=this,i=[];return e?t(e,function(e,t){l(e)?i.push({label:t,options:n.filterOptions(e)}):i.push({text:t,value:e})}):s("Invalid options provided for "+this.name),i}}},a={provide:function(){return{values:this.values}},props:{config:{type:[Object,Array],default:function(){return{}}},values:{type:Object,default:function(){return{}}},prefix:{type:String,default:"field-"},tag:{type:String,default:"div"}},methods:{prepare:function(e,n){var i=u(e),o=[];return t(e,function(e,t){(e=f({},e)).name||i||(e.name=t),e.name?(e.type||(e.type="text"),e.component||(e.component=n+e.type),o.push(e)):s("Field name missing "+JSON.stringify(e))}),o}},render:function(e,t){var n=this,i=this.prepare(this.config,this.prefix);if(this.$scopedSlots.default)return e(this.tag,i.map(function(e){return n.$scopedSlots.default({field:e})}));s("Default Fields slot is missing")}},e={Field:o,Fields:a,install:function(e){this.installed||(function(e){var t=e.set,n=e.config;r=t,i=n}(e),n(this.version),e.component("field",o),e.component("fields",a))},version:"1.1.2"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});
