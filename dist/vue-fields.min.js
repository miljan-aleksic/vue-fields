/*!
 * vue-fields v1.1.2
 * https://github.com/pagekit/vue-fields
 * Released under the MIT License.
 */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).VueFields=n()}(this,function(){"use strict";var o,r={},i=Object.assign||function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach(function(n){Object.keys(n||{}).forEach(function(e){return t[e]=n[e]})}),t},u=Array.isArray;function t(e,n){void 0===n&&(n="#41B883"),"undefined"!=typeof console&&r.devtools&&console.log("%c vue-fields %c "+e+" ","color: #fff; background: #35495E; padding: 1px; border-radius: 3px 0 0 3px;","color: #fff; background: "+n+"; padding: 1px; border-radius: 0 3px 3px 0;")}function f(e,n){void 0===n&&(n="#DB6B00"),t(e,n)}function a(e){return null!==e&&"object"==typeof e}function s(e){return void 0===e}function c(e,n,t){for(var r=u(n)?n:n.split("."),i=0;i<r.length;i++){if(!a(e)||s(e[r[i]]))return t;e=e[r[i]]}return e}var l={},d=/((?:\d|true|false|null|undefined|(?:this\.|\$)[\w.$]+|\W)*)([\w][\w.]*)?/g,p=/([^"']+)((.)(?:[^\3\\]|\\.)*?\3|.)?/g;function n(e,n){var t,r;if("number"==typeof e.length)for(t=0;t<e.length;t++)n.call(e[t],e[t],t);else if(a(e))for(r in e)e.hasOwnProperty(r)&&n.call(e[r],e[r],r);return e}function v(e){var t=[];return u(e)?e:(n(e,function(e,n){a(e)?t.push({label:n,options:v(e)}):t.push({text:n,value:e})}),t)}var h={provide:function(){return{Fields:this}},props:{config:{type:[Object,Array],default:function(){return{}}},values:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"}},methods:{prepare:function(e){var t=[],r=u(e);return n(e,function(e,n){(e=i({},e)).name||r||(e.name=n),e.name?t.push(e):f("Field name missing "+JSON.stringify(e))}),t},evaluate:function(e,n){void 0===n&&(n=this.values);try{return!!s(e)||(function(e){return"string"==typeof e}(e)&&(e=function(e){return l[e]=l[e]||Function("$values","$context","with($context){return "+e.replace(p,function(e,n,t){return void 0===t&&(t=""),n.replace(d,function(e,n,t){return void 0===n&&(n=""),e?n+(t?"$get('"+t+"')":""):""})+t})+"}")}(e)),function(e){return"function"==typeof e}(e)?e.call(this,n,{$match:g,$get:function(e){return c(n,e)}}):e)}catch(e){f(e)}return!0}},render:function(e){var t=this,n=this.prepare(this.config,this.prefix);if(this.$scopedSlots.default)return e(this.tag,n.map(function(n){var e={field:n,evaluate:t.evaluate};return Object.defineProperty(n,"value",{get:function(){return c(t.values,n.name)},set:function(e){!function(e,n,t){for(var r=u(n)?n:n.split(".");1<r.length;){var i=r.shift();a(e[i])||o(e,i,{}),e=e[i]}o(e,r.shift(),t)}(t.values,n.name,e),t.$emit("change",e,n)}}),t.$scopedSlots.default(e)}));f("Default Fields slot is missing")}};function g(e,n,t){return e&&new RegExp(n,t).test(e)}var e={Field:{functional:!0,render:function(e,n){var t=n.data;if(t.scopedSlots.default)return t.scopedSlots.default({filterOptions:v})}},Fields:h,install:function(e){this.installed||(function(e){var n=e.set,t=e.config;o=n,r=t}(e),t(this.version),e.component("fields",h))},version:"1.1.2"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});
